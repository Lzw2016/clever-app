startup-task:
  timedTask:
    - name: '测试定时任务'
      enable: true
      interval: 120s
      clazz: 'org.clever.app.task.TaskTest'
      method: 'job01'
  cmdTask:
    - name: '持续编译源码'
      enable: false
      async: true
      workDir: './'
      cmd:
        windows: 'gradlew.bat classes --continuous --watch-fs --build-cache --configuration-cache --configuration-cache-problems=warn'
        linux: './gradlew     classes --continuous --watch-fs --build-cache --configuration-cache --configuration-cache-problems=warn'
        macos: './gradlew     classes --continuous --watch-fs --build-cache --configuration-cache --configuration-cache-problems=warn'

mybatis:
  enable: true
  watcher: true
  interval: 1s
  locations:
    - fileType: filesystem
      location: './clever-boot/src/main/kotlin'
      filter: '**/*.xml'
    #- fileType: jar
    #  location: 'classpath*:org/clever/app/**/*.xml'
    #  filter: ''
    #- fileType: filesystem
    #  location: './clever-data-jdbc/src/test/resources/performance_test'
    #  filter: '**/*.xml'

jdbc:
  enable: true
  defaultName: 'mysql'
  dataSource:
    mysql:
      jdbcUrl: jdbc:p6spy:mysql://192.168.1.201:30011/test
      username: admin
      password: admin123456
      minimumIdle: 2
      maximumPoolSize: 100
      connectionTestQuery: 'select 1 from dual'
    postgresql:
      jdbcUrl: jdbc:p6spy:postgresql://192.168.1.201:30010/test
      username: admin
      password: admin123456
      minimumIdle: 2
      maximumPoolSize: 100
      connectionTestQuery: 'select 1'

redis:
  enable: true
  defaultName: 'default'
  global:
    ssl:  false
    readTimeout: 30s
    connectTimeout: 10s
    shutdownTimeout: 100ms
    clientName: 'clever-app'
    pool:
      enabled: true
      maxIdle: 8
      minIdle: 0
      maxActive: 8
      maxWait: 30s
      timeBetweenEvictionRuns: 1m
  dataSource:
    default:
      mode: Standalone
      standalone:
        host: '192.168.1.201'
        port: 30007
        database: 0
        password: 'admin123456'

web:
  host: '0.0.0.0'
  port: 9090
  http:
    autogenerateEtags: true
    maxRequestSize: 10MB
    #singlePageRoot:
    #  - hostedPath: '/xml'
    #    filePath: 'logback-app.xml'
    #    location: CLASSPATH
    #staticFile:
    #  - hostedPath: '/static'
    #    directory: 'clever-boot/src/main/resources'
    #    preCompress: true
    #    location: EXTERNAL
  mvc:
    path: '/api/'
    httpMethod: [ 'POST', 'GET' ]
    packagePrefix: 'org.clever.app.mvc.'
    allowPackages: [ 'org.clever.app.mvc.' ]
    defTransactional:
      defDatasource: ['mysql']
      datasource: ['mysql', 'postgresql']
      propagation: REQUIRED
      isolation: DEFAULT
      timeout: -1
      readOnly: false
    hotReload:
      enable: true
      interval: 1s
      excludePackages: [ ]
      locations:
        #- './clever-boot/out/production/classes'
        - './clever-boot/build/classes/java/main'
        - './clever-boot/build/classes/kotlin/main'
  security:
    enable: true
    dataSource:
      jdbcName: "mysql"
      enableRedis: true
      redisName: "default"
      redisNamespace: "security"
    ignorePaths:
      - '/favicon.ico'
      - '/dist/**'
      - '/static/**'
      - '/**/*.png'
      - '/**/*.ico'
      - '/**/*.js'
      - '/**/*.css'
      - '/**/*.html'
      - '/**/*.ts'
      - '/**/*.tsx'
      - '/**/*.map'
      - '/**/*.png'
      - '/**/*.jpg'
      - '/**/*.gif'
      - '/**/*.ttf'
      - '/**/*.woff'
      - '/**/*.woff2'
      - '/**/.git'
    ignoreAuthPaths: []
    ignoreAuthFailedPaths: []
    currentUserPath: '/current_user'
    login:
      paths: [ '/login' ]
      postOnly: true
      allowRepeatLogin: true
      concurrentLoginCount: 1
      allowAfterLogin: true
    logout:
      path: '/logout'
    token:
      secretKey: 'security'
      tokenValidity: 30d
      jwtTokenName: 'authorization'
      refreshTokenName: 'refresh-token'
